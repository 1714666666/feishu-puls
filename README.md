# 飞书Plus 浏览器插件

一个用于解除飞书文档复制限制的浏览器插件，支持格式保持。


### 核心功能
- ✅ **复制解锁**：完全解除飞书文档的复制限制
- ✅ **格式保持**：复制时保持文本格式（粗体、斜体、颜色等）
- ✅ **图片复制**：支持图片直接复制到语雀，无需微信中转 🆕
- ✅ **智能识别**：自动识别飞书页面并激活功能
- ✅ **多种结构支持**：支持列表、表格、链接等复杂结构
- ✅ **用户界面**：简洁的弹窗界面和状态显示
- ✅ **错误处理**：完善的错误处理和降级方案

## 🚀 快速开始

### 1. 准备图标文件
由于无法直接创建图标文件，请按以下步骤操作：

1. 在浏览器中打开 `create-icons.html` 文件
2. 点击下载按钮获取所需的图标文件：
   - icon-16.png (16x16像素)
   - icon-32.png (32x32像素) 
   - icon-48.png (48x48像素)
   - icon-128.png (128x128像素)
3. 将下载的图标文件放入 `icons/` 文件夹中

### 2. 安装插件

1. 打开Chrome浏览器
2. 进入扩展程序管理页面：`chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `feishu-plus` 文件夹
6. 插件安装完成！

### 3. 开始使用

#### 文本复制：
1. 访问任意飞书文档页面（如：https://xxx.feishu.cn/docs/xxx）
2. 插件会自动激活（工具栏图标显示绿色✓）
3. 正常选择文档中的任意内容
4. 使用 Ctrl+C 或右键菜单复制
5. 在其他应用中粘贴，格式完整保持！

#### 图片复制 🆕：
1. 在飞书文档中选择包含图片的内容
2. 按 Ctrl+C 复制
3. 看到蓝色提示："已复制 X 张图片（语雀兼容格式）"
4. 直接在语雀编辑器中按 Ctrl+V 粘贴
5. 图片完美显示，无需微信中转！

## 📋 支持的页面类型

- 📄 **飞书文档** (docs/docx)
- 📊 **飞书表格** (sheets)
- 🗃️ **飞书多维表格** (base)
- 📚 **飞书知识库** (wiki)
- 📝 **飞书妙记** (minutes)
- 📁 **文件预览** (file/drive)

## 🌐 支持的域名

- `*.feishu.cn` (飞书中国版)
- `*.larksuite.com` (飞书国际版)
- `*.feishu.com` (其他版本)

## 🎯 功能特性

### 复制解锁
- 移除所有复制限制事件监听器
- 覆盖CSS样式限制
- 拦截JavaScript阻止函数
- 清理DOM限制性属性

### 格式保持
- 基本格式：粗体、斜体、下划线、删除线
- 文本样式：颜色、背景色、字体大小
- 复杂结构：有序/无序列表、表格、链接
- 智能转换：飞书特有元素转为标准HTML

### 图片复制 🆕
- 标准化处理：移除飞书专有属性，生成Web标准格式
- 多格式支持：同时提供HTML和二进制图片数据
- 语雀兼容：专门优化，确保语雀能正确识别
- 批量处理：支持单张和多张图片同时复制

### 用户体验
- 实时状态提示
- 复制成功通知（显示格式信息）
- 智能错误处理
- 多层降级方案

## 🔧 项目结构

```
feishu-plus/
├── manifest.json          # 插件配置文件 (Manifest V3)
├── content.js             # 内容脚本 (复制解锁核心)
├── background.js          # 后台服务 (状态管理)
├── popup.html            # 弹窗界面
├── popup.css             # 弹窗样式
├── popup.js              # 弹窗逻辑
├── icons/                # 图标文件夹
├── create-icons.html     # 图标生成工具
└── README.md            # 项目说明
```

## 🛠️ 技术实现

- **Manifest V3**：使用最新的扩展程序标准
- **Content Script**：在飞书页面中执行复制解锁
- **Background Service Worker**：管理插件状态和通信
- **Chrome Storage API**：保存设置和统计数据
- **现代剪贴板API**：支持富文本复制

## 📊 开发状态

当前版本：**v1.0.0** ✅

### 已完成功能
- ✅ 项目基础结构和配置
- ✅ 复制解锁核心功能
- ✅ 富文本格式保持
- ✅ 图片复制标准化 🆕
- ✅ Background Service Worker
- ✅ 智能页面检测
- ✅ 用户界面框架
- ✅ 错误处理机制
- ✅ 统计和监控

### 待完善功能
- ⏳ 用户界面交互优化
- ⏳ 更多格式支持
- ⏳ 性能优化
- ⏳ 测试用例

## 🐛 故障排除

### 插件无法激活
1. 确认已访问飞书文档页面（不是首页）
2. 检查插件是否已启用
3. 刷新页面重试

### 复制无效果
1. 确认选中了文本内容
2. 尝试使用 Ctrl+C 快捷键
3. 检查浏览器控制台是否有错误

### 格式丢失
1. 确认目标应用支持富文本
2. 尝试粘贴到支持HTML的编辑器
3. 检查复制的内容是否包含格式

### 图片无法粘贴 🆕
1. 确认看到了蓝色的图片复制提示
2. 检查目标应用是否支持图片粘贴
3. 尝试刷新飞书页面重新复制
4. 查看浏览器控制台是否有错误信息

## 📄 许可证

MIT License - 自由使用和修改

## 🖼️ 图片复制功能详解 🆕

### 解决的问题
- ❌ 飞书图片无法直接粘贴到语雀
- ❌ 需要通过微信等工具中转
- ❌ 图片格式兼容性问题

### 技术原理
飞书使用专有格式复制图片，包含非标准属性，语雀无法识别。插件通过拦截复制事件，移除专有属性，生成标准HTML格式，让语雀能够正确识别。

### 使用效果
```
使用前：飞书 → 微信 → 语雀 ✅（麻烦）
使用后：飞书 → 语雀 ✅（直接成功！）
```

### 支持场景
- ✅ 单张图片复制
- ✅ 多张图片批量复制  
- ✅ 图文混合内容复制
- ✅ PNG、JPEG等常见格式
- ✅ 保持原始图片质量

### 详细指南
- 📖 [图片复制使用指南](IMAGE_COPY_GUIDE.md)
- 🔧 [技术实现说明](IMAGE_COPY_IMPLEMENTATION.md)
- 🧪 [功能测试指南](IMAGE_COPY_TEST.md)

## 🎉 开始体验

现在就可以安装使用飞书Plus插件了！享受自由复制飞书文档内容的便利，包括直接复制图片到语雀！
